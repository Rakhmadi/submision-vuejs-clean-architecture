import{o as d,c as f,a as i,n as g,t as w,r as p,b as x,w as S,d as v,e as c,f as k,g as T,h as L,i as E}from"./vendor.542dd820.js";const R=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}};R();var h=(t,e)=>{const o=t.__vccOpts||t;for(const[n,s]of e)o[n]=s;return o};const C={props:{value:{type:String,default:""}},computed:{isLessThanExpected(){return this.value.length<3&&this.value.length>0}},methods:{onInput(t){this.$emit("update:value",t.target.value)}}},I=["value"];function N(t,e,o,n,s,r){return d(),f("div",null,[i("input",{type:"text",class:"rounded-md py-2 px-2 border-2 border-green-100 transition focus:border-green-300 focus:outline-none w-full text-gray-500 m-1",placeholder:"Keywords",value:o.value,onInput:e[0]||(e[0]=(...a)=>r.onInput&&r.onInput(...a))},null,40,I),i("p",{class:g(["text-red-600 text-sm ml-1",r.isLessThanExpected?"block":"hidden"])}," must be longer than 3 characters",2)])}var P=h(C,[["render",N]]);const A={props:{text:{type:String,default:""},isDisable:{type:Boolean,default:!1}},methods:{onCilck(t){this.$emit("click",t)}}},U=["disabled"];function D(t,e,o,n,s,r){return d(),f("button",{class:"rounded-md py-1 px-2 bg-green-400 text-white",disabled:o.isDisable,onClick:e[0]||(e[0]=(...a)=>t.onClick&&t.onClick(...a))},w(o.text),9,U)}var y=h(A,[["render",D]]);function O(t,e,o={}){if(!Number.isFinite(e))throw new TypeError("Expected `wait` to be a finite number");let n,s,r=[];return function(...a){return new Promise(l=>{const u=o.leading&&!s;clearTimeout(s),s=setTimeout(()=>{s=null;const _=o.leading?n:t.apply(this,a);for(l of r)l(_);r=[]},e),u?(n=t.apply(this,a),l(n)):r.push(l)})}}const B={props:{isLoading:{type:Boolean,default:!1}}};function j(t,e,o,n,s,r){return d(),f("div",{class:g(["progress",o.isLoading?"opacity-100":"opacity-0"])},null,2)}var F=h(B,[["render",j]]);const V={components:{appButton:y},computed:{youtubeId(){return/(?:youtube\.com\/(?:[^/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?/\s]{11})/gi.exec(this.$store.state.url||"")},embedUrl(){return`https://www.youtube-nocookie.com/embed/${this.youtubeId[1]}?autoplay=1&start=${this.$store.state.currentResultStart}`}},methods:{closeDialog(){this.$store.commit("SET_CURRENT_RESULT_START",{currentResultStart:void 0})}}},G={class:"popup"},q={class:"flex items-center justify-center fixed left-0 bottom-0 w-full h-full bg-black bg-opacity-50"},H={class:"bg-white rounded-lg w-1/2 p-3"},K={class:"embed relative block p-0 overflow-hidden"},W=["src"];function z(t,e,o,n,s,r){const a=p("app-button"),l=p("Portal");return d(),f("div",null,[t.$store.state.currentResultStart&&r.embedUrl?(d(),x(l,{key:0,target:"body_id"},{default:S(()=>[i("div",G,[i("div",q,[i("div",H,[i("div",K,[i("iframe",{class:"top-0 left-0 bottom-0 w-full h-full",src:r.embedUrl,frameborder:"0",allow:"accelerometer; autoplay;encrypted-media;",allowfullscreen:"","data-cookieconsent":"marketing"},null,8,W)]),c(a,{text:"Close",class:"mt-3",onClick:r.closeDialog},null,8,["onClick"])])])])]),_:1})):v("",!0)])}var M=h(V,[["render",z]]);const Y={components:{searchForm:P,appButton:y,loadingBar:F,appDialog:M},data(){return{keyword:"",isLoading:!1}},computed:{url:{get(){return this.$store.state.url},set(t){this.$store.commit("SET_URL",{url:t})}}},watch:{keyword:O(async function(e){e&&e.length>=3?await this.search(e,this.url):this.resetData()},250)},methods:{async search(t,e,o){try{this.isLoading=!0;const n=await fetch(o||`https://cari-teks-video-api.vercel.app/api/search?&q=${t}&url=${encodeURIComponent(e)}`).then(s=>s.ok?s.json():[]);this.$store.commit("SET_RESULT_LIST",{resultList:n.data}),this.$store.commit("SET_PAGINATION",{first:n.first,last:n.last,prev:n.prev,next:n.next,total:n.total,page:n.page}),await this.$router.push({name:"SearchResultPage",params:{page:n.page}})}catch{}finally{setTimeout(()=>{this.isLoading=!1},1e3)}},async navigate(t){!this.$store.state.pagination[t]||await this.search(this.keyword,this.url,this.$store.state.pagination[t])},async clear(){this.keyword="",this.resetData(),await this.$router.replace("/")},resetData(){this.$store.commit("SET_RESULT_LIST",{resultList:[]}),this.$store.commit("RESET_PAGINATION")}}},J={class:"flex justify-center sm-auto overflow-auto",id:"app"},Q={class:"shadow-lg rounded-md w-2/3 m-12"},X={class:"m-3"},Z=i("div",{class:"flex justify-center items-center"},[i("h2",{class:"text-gray-500 text-2xl"},"Search Subtitle Youtube")],-1),ee={class:"flex flex-col m-2"},te={class:"p-1"},se=i("br",null,null,-1),re={key:0,class:"m-1 flex flex-row"};function ne(t,e,o,n,s,r){const a=p("loading-bar"),l=p("search-form"),u=p("app-button"),_=p("router-view"),$=p("app-dialog");return d(),f("div",J,[i("div",Q,[c(a,{isLoading:s.isLoading},null,8,["isLoading"]),i("div",X,[Z,i("div",ee,[c(l,{value:s.keyword,"onUpdate:value":e[0]||(e[0]=m=>s.keyword=m)},null,8,["value"]),i("div",te,[c(u,{text:"Clear",onClick:r.clear},null,8,["onClick"])]),se,t.$store.state.pagination.total>0?(d(),f("div",re,[c(u,{class:"mr-1","is-disabled":!t.$store.state.pagination.first,text:"First",onClick:e[1]||(e[1]=m=>r.navigate("first"))},null,8,["is-disabled"]),c(u,{class:"mr-1","is-disabled":!t.$store.state.pagination.prev,text:"Prev",onClick:e[2]||(e[2]=m=>r.navigate("prev"))},null,8,["is-disabled"]),c(u,{class:"mr-1","is-disabled":!t.$store.state.pagination.next,text:"Next",onClick:e[3]||(e[3]=m=>r.navigate("next"))},null,8,["is-disabled"]),c(u,{class:"mr-1","is-disabled":!t.$store.state.pagination.last,text:"Last",onClick:e[4]||(e[4]=m=>r.navigate("last"))},null,8,["is-disabled"])])):v("",!0),c(_),c($)])])])])}var oe=h(Y,[["render",ne]]);const ae=k({state(){return{url:"https://www.youtube.com/watch?v=klnvttPfOUM",resultList:[],pagination:{first:void 0,last:void 0,prev:void 0,next:void 0,total:0,page:0},currentResultStart:void 0}},mutations:{SET_URL(t,{url:e}){t.url=e},SET_RESULT_LIST(t,{resultList:e}){t.resultList=e},SET_PAGINATION(t,e){t.pagination=e},RESET_PAGINATION(t){t.pagination={first:void 0,last:void 0,prev:void 0,next:void 0,total:0,page:0}},SET_CURRENT_RESULT_START(t,{currentResultStart:e}){t.currentResultStart=e}}}),ie="modulepreload",b={},le="/",ce=function(e,o){return!o||o.length===0?e():Promise.all(o.map(n=>{if(n=`${le}${n}`,n in b)return;b[n]=!0;const s=n.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":ie,s||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),s)return new Promise((l,u)=>{a.addEventListener("load",l),a.addEventListener("error",u)})})).then(()=>e())},ue=T({history:L(),routes:[{name:"SearchResultPage",path:"/result/:page",component:()=>ce(()=>import("./searchResultPage.c90f3687.js"),["assets/searchResultPage.c90f3687.js","assets/vendor.542dd820.js"])}]});E(oe).use(ae).use(ue).mount("#app");export{h as _,y as a};
